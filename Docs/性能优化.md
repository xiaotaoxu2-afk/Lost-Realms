# 项目性能优化文档


## 1. 优化背景
项目开发初期存在「游戏启动慢、场景切换卡顿」等问题，直接影响核心体验，因此优先聚焦**资源加载维度**进行针对性优化。


## 2. 已落地优化措施
### 2.1 资源加载优化
#### （1）问题描述
- 游戏启动时**同步加载所有场景+预制体**，启动时间长达8秒；
- 场景切换时**直接销毁当前资源**，导致1-2秒卡顿，用户感知差。

#### （2）优化方案
1. **Addressables资源分组管理**：
   将资源划分为2个核心组：
   - 「启动组」：仅包含主菜单、玩家预制体、核心UI等启动必需资源；
   - 「关卡组」：按关卡划分3个子组（Level1/Level2/BossScene），包含对应关卡场景、敌人预制体等非启动资源。
2. **异步加载+进度监听**：
   - 通过`Addressables.LoadSceneAsync(sceneName, LoadSceneMode.Single)`实现关卡异步加载，避免阻塞主线程；
   - 封装`SceneLoader.cs`脚本，监听`Progress`属性获取加载进度，并在UI显示加载条（提升用户等待感知）。

#### （3）优化成果
- 启动时间：从8秒优化至3秒（提升62.5%）；
- 场景切换时间：从2.5秒优化至0.8秒（提升68%）；
- 体验改善：加载过程无卡顿，用户等待感知更流畅。


## 3. 未落地但计划中的优化
| 优化方向 | 未落地原因 | 后续优化思路 |
|----------|------------|--------------|
| 敌人对象池优化 | 当前敌人数量较少，卡顿问题不明显 | 实现`EnemyPoolManager.cs`，关卡启动时预加载敌人预制体，战斗中复用实例，减少GC开销 |
| Sprite图集合并 | 对Unity Sprite Packer工具不熟悉 | 学习Sprite Packer的使用方法，将同关卡的敌人/道具Sprite合并为图集，降低DrawCall |


## 4. 优化工具
- 性能分析工具：使用**Unity Profiler（CPU/Memory模块）**，定位启动慢、场景切换卡顿的核心瓶颈；
- 验证方法：录制优化前后的Profiler数据，对比启动时间、内存占用等指标，量化优化效果。
